var baseurl="http://43.252.243.10:8000/v1/";MetronicApp.controller("ResourcesController",["$rootScope","$scope","$http","$timeout","$modal",function(a,b,c,d,e){b.$on("$viewContentLoaded",function(){Metronic.initAjax(),b.sounds=[],c.get(baseurl+"accounts/"+accountId+"/media",{headers:{"X-Auth-Token":authId}}).then(function(a){console.log(a),b.sounds=a.data}),a.settings.layout.pageSidebarClosed=!1,b.allAgents=[],c.get(baseurl+"accounts/"+accountId+"/users",{headers:{"X-Auth-Token":authId}}).then(function(a){allAgents1=a.data,b.allAgents=a.data}),b.delUser=function(a,b,d){c["delete"](baseurl+"accounts/"+accountId+"/users/"+a,{headers:{"X-Auth-Token":authId}}).then(function(a){alert("User is deleted")}),angular.element(b.target).parents("tr").remove()},b.downloadFile=function(a,b,d){c.get(baseurl+"accounts/"+accountId+"/media/"+a,{headers:{"X-Auth-Token":authId}}).then(function(b){console.log(b),window.location.href=baseurl+"accounts/"+accountId+"/media/"+a+"/raw?auth_token="+authId},function(){alert("Oops something went wrong")})},b.delFile=function(a,b){console.log(a),c["delete"](baseurl+"accounts/"+accountId+"/media/"+a,{headers:{"X-Auth-Token":authId}}).then(function(a){alert("File is deleted")}),angular.element(b.target).parents("tr").remove()},b.open=function(a){e.open({templateUrl:"addAgentModal.html",controller:"modalCtrl",size:a})},b.AddFile=function(a){e.open({templateUrl:"addSoundModal.html",controller:"modalSoundCtrl",size:a})}})}]),MetronicApp.controller("modalCtrl",["$modalInstance","$scope","$http","$state",function(a,b,c,d){b.newAgent={},b.addAgentFn=function(e){if(e){var f={data:{first_name:b.newAgent.agentName,last_name:b.newAgent.agentName,caller_id:{internal:{name:b.newAgent.agentName,number:b.newAgent.agentNumber},external:{name:b.newAgent.agentName,number:b.newAgent.agentNumber}},username:b.newAgent.agentEmail}};console.log(b.newAgent),console.log(f),c.put("http://43.252.243.10:8000/v1/accounts/"+accountId+"/users",f,{headers:{"X-Auth-Token":authId}}).then(function(a){console.log(a),mediaData=a,console.log(mediaData),d.reload()}),a.close()}},b.cancel=function(){a.dismiss("cancel")}}]),MetronicApp.controller("modalSoundCtrl",["$modalInstance","$scope","$http",function(a,b,c){b.newAgent={},b.chak,b.addSoundFn=function(b){thefile=b.target.files[0],console.log(thefile),null!=thefile&&(reader=new FileReader,reader.readAsDataURL(thefile),console.log(reader.result)),a.close()},b.cancel=function(){a.dismiss("cancel")}}]),MetronicApp.directive("appFilereader",["$q",function(a){var b=Array.prototype.slice;return{restrict:"A",require:"?ngModel",link:function(c,d,e,f){f&&(f.$render=function(){},d.bind("change",function(d){function e(b){var d=a.defer(),e=new FileReader;return e.onload=function(a){d.resolve(a.target.result),c.$apply(function(){c.chak=b})},e.onerror=function(a){d.reject(a)},e.readAsDataURL(b),d.promise}var g=d.target;a.all(b.call(g.files,0).map(e)).then(function(a){g.multiple?f.$setViewValue(a):f.$setViewValue(a.length?a[0]:null)})}))}}}]);